(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(11),c=n.n(s),r=n(5),o=n(2),i=(n(17),n(18),n(19),n(0)),a=function(e){var t=e.posts,n=e.selectedPostId,s=e.onSelectedPost;return Object(i.jsxs)("div",{className:"PostsList",children:[Object(i.jsx)("h2",{children:"Posts:"}),t&&t.length?Object(i.jsx)("ul",{className:"PostsList__list",children:t.map((function(e){return Object(i.jsxs)("li",{className:"PostsList__item",children:[Object(i.jsxs)("div",{children:[Object(i.jsxs)("b",{children:["[User",e.userId,"]:"]}),e.title]}),Object(i.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return s(e.id)},children:n===e.id?"Close":"Open"})]},e.id)}))}):Object(i.jsx)("p",{children:"There are currently no posts"})]})},l=n(4),u=n(1),j=n(6),d=n(3),b=n.n(d),m="https://mate.academy/students-api",h=function(){var e=Object(j.a)(b.a.mark((function e(){var t,n,s,c,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",n=r.length>1&&void 0!==r[1]?r[1]:{method:"GET"},e.prev=2,e.next=5,fetch("".concat(m).concat(t),n);case 5:return s=e.sent,e.next=8,s.json();case 8:if(c=e.sent,s.ok){e.next=11;break}throw new Error("Error with request");case 11:return e.abrupt("return",c);case 14:return e.prev=14,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),O=function(){return h("/posts")},f=function(e){return h("/posts?userId=".concat(e))},p=function(e){return h("/posts/".concat(e))},x=function(e){return h("/comments").then((function(t){return t.filter((function(t){return t.postId===e}))}))},v=function(e){return h("/comments/".concat(e),{method:"DELETE"})},_=function(e){return h("/comments",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})},N=(n(22),function(){return Object(i.jsx)("div",{className:"Loader",children:Object(i.jsx)("div",{className:"Loader__content"})})}),P=n(12),y=(n(23),function(e){var t=e.addNewComment,n=e.selectedPostId,s=Object(P.a)({mode:"onBlur"}),c=s.register,r=s.handleSubmit,a=s.reset,l=s.formState.errors;return Object(o.useEffect)((function(){Object.keys(l).length&&a()}),[n]),Object(i.jsxs)("form",{className:"NewCommentForm",onSubmit:r((function(e){return function(e){t(e),a()}(e)})),children:[Object(i.jsxs)("div",{className:"form-field",children:[Object(i.jsx)("input",Object(u.a)(Object(u.a)({},c("name",{required:!0})),{},{placeholder:"Your name",className:"NewCommentForm__input",autoComplete:"off"})),l.name&&Object(i.jsx)("p",{className:"form-field__error",children:"This is required"})]}),Object(i.jsxs)("div",{className:"form-field",children:[Object(i.jsx)("input",Object(u.a)(Object(u.a)({},c("email",{required:!0})),{},{placeholder:"Your email",className:"NewCommentForm__input",autoComplete:"off"})),l.email&&Object(i.jsx)("p",{className:"form-field__error",children:"This is required"})]}),Object(i.jsxs)("div",{className:"form-field",children:[Object(i.jsx)("textarea",Object(u.a)(Object(u.a)({},c("body",{required:!0})),{},{placeholder:"Type comment here",className:"NewCommentForm__input"})),l.body&&Object(i.jsx)("p",{className:"form-field__error",children:"This is requiredvv"})]}),Object(i.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",disabled:Boolean(Object.keys(l).length),children:"Add a comment"})]})}),C=(n(24),function(e){var t=e.selectedPostId,n=Object(o.useState)(),s=Object(r.a)(n,2),c=s[0],a=s[1],j=Object(o.useState)([]),d=Object(r.a)(j,2),b=d[0],m=d[1],h=Object(o.useState)(!0),O=Object(r.a)(h,2),f=O[0],P=O[1],C=Object(o.useState)(!1),S=Object(r.a)(C,2),w=S[0],g=S[1];return Object(o.useEffect)((function(){g(!0),0!==t&&(p(t).then((function(e){return a(e)})),x(t).then((function(e){m(e),g(!1)})))}),[t]),Object(i.jsxs)("div",{className:"PostDetails",children:[Object(i.jsx)("h2",{children:"Post details:"}),w?Object(i.jsx)(N,{}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("section",{className:"PostDetails__post",children:Object(i.jsx)("p",{children:null===c||void 0===c?void 0:c.body})}),Boolean(b.length)&&Object(i.jsxs)("section",{className:"PostDetails__comments",children:[Object(i.jsxs)("button",{type:"button",className:"button",onClick:function(){return P((function(e){return!e}))},children:[f?"Hide":"Show"," ",null===b||void 0===b?void 0:b.length," ","comments"]}),Object(i.jsx)("ul",{className:"PostDetails__list",children:f&&b.map((function(e){return Object(i.jsxs)("li",{className:"PostDetails__list-item",children:[Object(i.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return t=e.id,v(t),void m((function(e){return e.filter((function(e){return e.id!==t}))}));var t},children:"X"}),Object(i.jsx)("p",{children:e.body})]},e.id)}))})]})]}),Object(i.jsx)("section",{children:Object(i.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(i.jsx)(y,{addNewComment:function(e){_(Object(u.a)(Object(u.a)({},e),{},{postId:t})).then((function(e){return m([].concat(Object(l.a)(b),[e]))}))},selectedPostId:t})})})]})}),S=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],s=t[1],c=Object(o.useState)(0),l=Object(r.a)(c,2),u=l[0],j=l[1],d=Object(o.useState)(0),b=Object(r.a)(d,2),m=b[0],h=b[1],p=Object(o.useState)(!1),x=Object(r.a)(p,2),v=x[0],_=x[1];Object(o.useEffect)((function(){_(!0),u?f(u).then((function(e){s(e),_(!1)})):O().then((function(e){s(e),_(!1)}))}),[u]);var P=Object(o.useCallback)((function(e){h(e===m?0:e)}),[]);return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App__header",children:Object(i.jsxs)("label",{htmlFor:"users",children:["Select a user: \xa0",Object(i.jsxs)("select",{className:"App__user-selector",id:"users",value:u,onChange:function(e){return j(+e.target.value)},children:[Object(i.jsx)("option",{value:"0",children:"All users"}),Object(i.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(i.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(i.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(i.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(i.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(i.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(i.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(i.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(i.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(i.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})}),Object(i.jsxs)("main",{className:"App__main",children:[Object(i.jsx)("div",{className:"App__sidebar",children:v?Object(i.jsx)(N,{}):Object(i.jsx)(a,{posts:n,selectedPostId:m,onSelectedPost:P})}),Object(i.jsx)("div",{className:"App__content",children:m?Object(i.jsx)(C,{selectedPostId:m}):Object(i.jsx)("h2",{children:"Post not selected"})})]})]})};c.a.render(Object(i.jsx)(S,{}),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.a1368a5a.chunk.js.map